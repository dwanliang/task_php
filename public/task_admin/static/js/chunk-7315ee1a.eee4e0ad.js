(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7315ee1a"],{"02a3":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"root"},[n("div",{staticClass:"banners-fun"},[n("el-button",{attrs:{icon:"el-icon-circle-plus-outline",type:"primary"},on:{click:e.add_banners}},[e._v("添加轮播图")]),e._v(" "),n("el-button",{attrs:{icon:"el-icon-delete",type:"danger"},on:{click:function(t){return e.deletebanners("all")}}},[e._v("批量删除")])],1),e._v(" "),n("el-card",{staticClass:"box-card"},[n("h3",[e._v("轮播图列表")]),e._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"default-sort":{prop:"createDate",order:"descending"}},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),n("el-table-column",{attrs:{prop:"id",label:"ID",width:"100","show-overflow-tooltip":""}}),e._v(" "),n("el-table-column",{attrs:{align:"left",width:"200",prop:"banners_img",label:"轮播图图片"},scopedSlots:e._u([{key:"default",fn:function(t){return n("div",{staticClass:"my-pic"},[n("el-image",{staticStyle:{width:"80px",height:"80px"},attrs:{fit:"scale-down",src:t.row.banners_img,"preview-src-list":e.srcList},on:{click:function(n){return e.imgClick(t.row.banners_img)}}})],1)}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"banners_title",width:"300",label:"标题","show-overflow-tooltip":""}}),e._v(" "),n("el-table-column",{attrs:{prop:"banners_url",width:"300",label:"轮播图链接"}}),e._v(" "),n("el-table-column",{attrs:{prop:"banners_sort",label:"排序","show-overflow-tooltip":""}}),e._v(" "),n("el-table-column",{attrs:{prop:"add_time",label:"添加时间",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"280",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return n("div",{staticClass:"operation"},[n("el-button",{attrs:{size:"mini",icon:"el-icon-edit",type:"primary"},on:{click:function(n){return e.editbanners(t.row.id)}}},[e._v("编辑")]),e._v(" "),n("el-button",{attrs:{size:"mini",icon:"el-icon-delete",type:"danger"},on:{click:function(n){return e.deletebanners(t.row.id)}}},[e._v("删除")])],1)}}])})],1),e._v(" "),n("el-pagination",{staticClass:"pagination",attrs:{background:"",layout:"total, sizes,prev, pager, next,jumper",align:"left",total:e.total,"page-size":e.pageSize,"page-sizes":e.pageSizes},on:{"size-change":e.handleSizeChange,"current-change":e.pageChange,"prev-click":e.pageChange,"next-click":e.pageChange}})],1),e._v(" "),n("add-Dialog",{attrs:{show:e.add_show},on:{add_show:e.show_flag,"update:show":function(t){e.add_show=t}}}),e._v(" "),e.edit_show?[e.edit_show?n("edit-Dialog",{attrs:{edit_id:e.edit_id,show:e.edit_show},on:{edit_show:e.edit_flag,"update:show":function(t){e.edit_show=t}}}):e._e()]:e._e()],2)},r=[],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-dialog",{attrs:{title:"添加轮播图",visible:e.visible,center:"",width:"50%"},on:{"update:visible":function(t){e.visible=t}}},[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[n("el-form-item",{attrs:{label:"轮播图标题",prop:"banners_title","label-width":e.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.banners_title,callback:function(t){e.$set(e.form,"banners_title",t)},expression:"form.banners_title"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"轮播图链接",prop:"banners_url","label-width":e.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.banners_url,callback:function(t){e.$set(e.form,"banners_url",t)},expression:"form.banners_url"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"轮播图排序",prop:"banners_sort","label-width":e.formLabelWidth}},[n("el-input",{attrs:{type:"number",autocomplete:"off"},model:{value:e.form.banners_sort,callback:function(t){e.$set(e.form,"banners_sort",t)},expression:"form.banners_sort"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"轮播图图片",prop:"banners_img","label-width":e.formLabelWidth}},[n("el-upload",{ref:"uploadxls",attrs:{action:"","auto-upload":!1,data:e.form,"before-upload":e.beforeupload,"on-change":e.handleChange,"list-type":"picture-card",accept:"image/png,image/gif,image/jpg,image/jpeg"}},[n("i",{staticClass:"el-icon-plus"})])],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){return e.show_flag(!1)}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.show_flag(!0)}}},[e._v("确 定")])],1)],1)],1)},o=[],s=(n("5c96"),{data:function(){return{visible:this.show,formLabelWidth:"120px",form:{banners_title:"",banners_sort:1,banners_url:"",banners_img:[]},fileList:[],formData:new FormData,rules:{banners_title:[{required:!0,message:"请输入轮播图标题",trigger:"blur"}],banners_sort:[{required:!0,message:"请输入排序",trigger:"blur"}],banners_url:[{required:!0,message:"请输入排序",trigger:"blur"},{type:"url",message:"请输入正确的链接地址",trigger:["blur","change"]}]}}},props:{show:{type:Boolean,default:!1}},methods:{beforeupload:function(e){return this.formData.append("file",e),!1},handleChange:function(e,t){t.length>1&&t.splice(0,1)},show_flag:function(e){var t=this;e?this.$refs["form"].validate((function(n){n&&t.add_banners(e)})):this.$emit("add_show",e)},add_banners:function(e){var t=this,n=this.form.banners_title,a=this.form.banners_sort,r=this.form.banners_url;this.$refs.uploadxls.submit(),this.formData.append("banners_title",n),this.formData.append("banners_sort",a),this.formData.append("banners_url",r),this.req({url:"Banners/add",data:this.formData,method:"POST"}).then((function(n){200==n.code?(t.$message("添加成功~"),t.form={banners_title:"",banners_sort:1,banners_url:"",banners_img:[]},setTimeout((function(){t.$emit("add_show",e)}),1e3)):t.$message("添加失败~")}))}},watch:{show:function(){this.visible=this.show},visible:function(){this.visible||this.$emit("add_show",!1)}}}),l=s,c=n("2877"),f=Object(c["a"])(l,i,o,!1,null,null,null),u=f.exports,d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-dialog",{attrs:{title:"编辑轮播图",visible:e.visible,center:"",width:"50%"},on:{"update:visible":function(t){e.visible=t}}},[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[n("el-form-item",{attrs:{label:"轮播图标题",prop:"banners_title","label-width":e.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.banners_title,callback:function(t){e.$set(e.form,"banners_title",t)},expression:"form.banners_title"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"轮播图链接",prop:"banners_url","label-width":e.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.banners_url,callback:function(t){e.$set(e.form,"banners_url",t)},expression:"form.banners_url"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"轮播图排序",prop:"banners_sort","label-width":e.formLabelWidth}},[n("el-input",{attrs:{type:"number",autocomplete:"off"},model:{value:e.form.banners_sort,callback:function(t){e.$set(e.form,"banners_sort",t)},expression:"form.banners_sort"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"轮播图图片",prop:"banners_img","label-width":e.formLabelWidth}},[n("el-upload",{ref:"uploadxls",attrs:{action:"","auto-upload":!1,data:e.form,"before-upload":e.beforeupload,"on-change":e.handleChange,"list-type":"picture-card","file-list":e.form.banners_img,accept:"image/png,image/gif,image/jpg,image/jpeg"}},[n("i",{staticClass:"el-icon-plus"})])],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){return e.show_flag(!1)}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.show_flag(!0)}}},[e._v("确 定")])],1)],1)],1)},p=[],h=(n("c5f6"),{data:function(){return{visible:this.show,formLabelWidth:"120px",form:{banners_title:"",banners_sort:1,banners_url:"",banners_img:[]},fileList:[],formData:new FormData,rules:{banners_title:[{required:!0,message:"请输入轮播图标题",trigger:"blur"}],banners_sort:[{required:!0,message:"请输入排序",trigger:"blur"}],banners_url:[{required:!0,message:"请输入排序",trigger:"blur"},{type:"url",message:"请输入正确的链接地址",trigger:["blur","change"]}]}}},props:{show:{type:Boolean,default:!1},edit_id:{type:Number}},created:function(){this.edit_data(this.edit_id)},methods:{beforeupload:function(e){return this.formData.append("file",e),!1},handleChange:function(e,t){t.length>1&&t.splice(0,1)},show_flag:function(e){var t=this;e?this.$refs["form"].validate((function(n){n&&t.edit_banners(e)})):this.$emit("edit_show",e)},edit_data:function(e){var t=this;this.req({url:"Banners/banners_list?id="+e,data:{},method:"GET"}).then((function(e){200==e.code&&(t.form=e.data)}))},edit_banners:function(e){var t=this,n=this.form.banners_title,a=this.form.banners_sort,r=this.form.banners_url;this.$refs.uploadxls.submit(),this.formData.append("banners_title",n),this.formData.append("banners_sort",a),this.formData.append("banners_url",r),this.formData.append("id",this.edit_id),this.req({url:"Banners/edit",data:this.formData,method:"POST"}).then((function(n){200==n.code?(t.$message("编辑成功~"),t.form={banners_title:"",banners_sort:1,banners_url:"",banners_img:[]},setTimeout((function(){t.$emit("edit_show",e)}),1e3)):t.$message("编辑失败~")}))}},watch:{show:function(){this.visible=this.show},visible:function(){this.visible||this.$emit("edit_show",!1)}}}),b=h,m=Object(c["a"])(b,d,p,!1,null,null,null),_=m.exports,g={components:{addDialog:u,editDialog:_},data:function(){return{pageSize:10,pageSizes:[10,20,50,100],total:0,page:1,srcList:[],tableData:[],Selectval:[],add_show:!1,edit_show:!1,edit_id:0,value2:""}},created:function(){this.getTemplateList()},methods:{imgClick:function(e){this.srcList=[e]},handleSelectionChange:function(e){this.Selectval=e},handleSizeChange:function(e){this.getTemplateList(this.page,e)},add_banners:function(){this.add_show=!0},show_flag:function(e){this.add_show=!1,e&&this.getTemplateList()},editbanners:function(e){this.edit_id=e,this.edit_show=!0},edit_flag:function(e){this.edit_show=!1,e&&this.getTemplateList()},getTemplateList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.page,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.pageSize,n=this,a={page:e,limit:t};this.req({url:"banners/banners_list",data:a,method:"POST"}).then((function(e){n.total=e.data.total,n.tableData=e.data.data}))},deletebanners:function(e){var t=this;if(0!=this.Selectval||"all"!=e){if("all"==e){for(var n=[],a=0;a<this.Selectval.length;a++)n.push(this.Selectval[a]["id"]);console.log(this.Selectval),e=n.join(",")}this.$confirm("此操作将删除轮播图, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.req({url:"banners/delete?id="+e,data:{},method:"GET"}).then((function(e){t.getTemplateList(),t.$message("删除成功~")}))}))}else t.$message("请先选择删除项~")},downloadTemplate:function(e){},pageChange:function(e){this.page=e,this.getTemplateList(e)}}},v=g,w=(n("ffcb"),Object(c["a"])(v,a,r,!1,null,"e6adc19c",null));t["default"]=w.exports},"11e9":function(e,t,n){var a=n("52a7"),r=n("4630"),i=n("6821"),o=n("6a99"),s=n("69a8"),l=n("c69a"),c=Object.getOwnPropertyDescriptor;t.f=n("9e1e")?c:function(e,t){if(e=i(e),t=o(t,!0),l)try{return c(e,t)}catch(n){}if(s(e,t))return r(!a.f.call(e,t),e[t])}},"5dbc":function(e,t,n){var a=n("d3f4"),r=n("8b97").set;e.exports=function(e,t,n){var i,o=t.constructor;return o!==n&&"function"==typeof o&&(i=o.prototype)!==n.prototype&&a(i)&&r&&r(e,i),e}},"8b97":function(e,t,n){var a=n("d3f4"),r=n("cb7c"),i=function(e,t){if(r(e),!a(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,a){try{a=n("9b43")(Function.call,n("11e9").f(Object.prototype,"__proto__").set,2),a(e,[]),t=!(e instanceof Array)}catch(r){t=!0}return function(e,n){return i(e,n),t?e.__proto__=n:a(e,n),e}}({},!1):void 0),check:i}},9093:function(e,t,n){var a=n("ce10"),r=n("e11e").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return a(e,r)}},aa77:function(e,t,n){var a=n("5ca1"),r=n("be13"),i=n("79e5"),o=n("fdef"),s="["+o+"]",l="​",c=RegExp("^"+s+s+"*"),f=RegExp(s+s+"*$"),u=function(e,t,n){var r={},s=i((function(){return!!o[e]()||l[e]()!=l})),c=r[e]=s?t(d):o[e];n&&(r[n]=c),a(a.P+a.F*s,"String",r)},d=u.trim=function(e,t){return e=String(r(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(f,"")),e};e.exports=u},c212:function(e,t,n){},c5f6:function(e,t,n){"use strict";var a=n("7726"),r=n("69a8"),i=n("2d95"),o=n("5dbc"),s=n("6a99"),l=n("79e5"),c=n("9093").f,f=n("11e9").f,u=n("86cc").f,d=n("aa77").trim,p="Number",h=a[p],b=h,m=h.prototype,_=i(n("2aeb")(m))==p,g="trim"in String.prototype,v=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){t=g?t.trim():d(t,3);var n,a,r,i=t.charCodeAt(0);if(43===i||45===i){if(n=t.charCodeAt(2),88===n||120===n)return NaN}else if(48===i){switch(t.charCodeAt(1)){case 66:case 98:a=2,r=49;break;case 79:case 111:a=8,r=55;break;default:return+t}for(var o,l=t.slice(2),c=0,f=l.length;c<f;c++)if(o=l.charCodeAt(c),o<48||o>r)return NaN;return parseInt(l,a)}}return+t};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof h&&(_?l((function(){m.valueOf.call(n)})):i(n)!=p)?o(new b(v(t)),n,h):v(t)};for(var w,y=n("9e1e")?c(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;y.length>x;x++)r(b,w=y[x])&&!r(h,w)&&u(h,w,f(b,w));h.prototype=m,m.constructor=h,n("2aba")(a,p,h)}},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},ffcb:function(e,t,n){"use strict";n("c212")}}]);