(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f542b7c4"],{"11e9":function(e,t,i){var o=i("52a7"),a=i("4630"),r=i("6821"),s=i("6a99"),n=i("69a8"),l=i("c69a"),c=Object.getOwnPropertyDescriptor;t.f=i("9e1e")?c:function(e,t){if(e=r(e),t=s(t,!0),l)try{return c(e,t)}catch(i){}if(n(e,t))return a(!o.f.call(e,t),e[t])}},"15e8":function(e,t,i){"use strict";i("c486")},"5dbc":function(e,t,i){var o=i("d3f4"),a=i("8b97").set;e.exports=function(e,t,i){var r,s=t.constructor;return s!==i&&"function"==typeof s&&(r=s.prototype)!==i.prototype&&o(r)&&a&&a(e,r),e}},"8b97":function(e,t,i){var o=i("d3f4"),a=i("cb7c"),r=function(e,t){if(a(e),!o(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,o){try{o=i("9b43")(Function.call,i("11e9").f(Object.prototype,"__proto__").set,2),o(e,[]),t=!(e instanceof Array)}catch(a){t=!0}return function(e,i){return r(e,i),t?e.__proto__=i:o(e,i),e}}({},!1):void 0),check:r}},9093:function(e,t,i){var o=i("ce10"),a=i("e11e").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return o(e,a)}},aa77:function(e,t,i){var o=i("5ca1"),a=i("be13"),r=i("79e5"),s=i("fdef"),n="["+s+"]",l="​",c=RegExp("^"+n+n+"*"),d=RegExp(n+n+"*$"),u=function(e,t,i){var a={},n=r((function(){return!!s[e]()||l[e]()!=l})),c=a[e]=n?t(f):s[e];i&&(a[i]=c),o(o.P+o.F*n,"String",a)},f=u.trim=function(e,t){return e=String(a(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(d,"")),e};e.exports=u},b80a:function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"root"},[i("div",{staticClass:"admin-fun"},[i("el-button",{attrs:{icon:"el-icon-circle-plus-outline",type:"primary"},on:{click:e.add_admin}},[e._v("添加管理员")]),e._v(" "),i("el-button",{attrs:{icon:"el-icon-delete",type:"danger"},on:{click:function(t){return e.deleteadmin("all")}}},[e._v("批量删除")])],1),e._v(" "),i("el-card",{staticClass:"box-card"},[i("h3",[e._v("管理员列表")]),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"default-sort":{prop:"createDate",order:"descending"},"row-key":"id",border:"","default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),i("el-table-column",{attrs:{prop:"id",label:"ID",width:"100","show-overflow-tooltip":""}}),e._v(" "),i("el-table-column",{attrs:{prop:"username",label:"管理员账号","show-overflow-tooltip":""}}),e._v(" "),i("el-table-column",{attrs:{prop:"describes",label:"描述"}}),e._v(" "),i("el-table-column",{attrs:{prop:"add_time",label:"创建时间",sortable:""}}),e._v(" "),i("el-table-column",{attrs:{prop:"login_time",label:"上次登录时间",sortable:""}}),e._v(" "),i("el-table-column",{attrs:{prop:"ip",label:"登录ip",sortable:""}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return i("div",{staticClass:"operation"},[i("el-button",{attrs:{size:"mini",icon:"el-icon-s-operation",type:"success"},on:{click:function(i){return e.roleadmin(t.row.id)}}},[e._v("角色")]),e._v(" "),i("el-button",{attrs:{size:"mini",icon:"el-icon-edit",type:"primary"},on:{click:function(i){return e.editadmin(t.row.id)}}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{size:"mini",icon:"el-icon-delete",type:"danger"},on:{click:function(i){return e.deleteadmin(t.row.id)}}},[e._v("删除")])],1)}}])})],1),e._v(" "),i("el-pagination",{staticClass:"pagination",attrs:{background:"",layout:"total, sizes,prev, pager, next,jumper",align:"left",total:e.total,"page-size":e.pageSize,"page-sizes":e.pageSizes},on:{"size-change":e.handleSizeChange,"current-change":e.pageChange,"prev-click":e.pageChange,"next-click":e.pageChange}})],1),e._v(" "),i("add-Dialog",{attrs:{show:e.add_show},on:{add_show:e.show_flag,"update:show":function(t){e.add_show=t}}}),e._v(" "),e.edit_show?[e.edit_show?i("edit-Dialog",{attrs:{edit_id:e.edit_id,show:e.edit_show},on:{edit_show:e.edit_flag,"update:show":function(t){e.edit_show=t}}}):e._e()]:e._e(),e._v(" "),e.role_show?[e.role_show?i("role-Dialog",{attrs:{admin_id:e.admin_id,show:e.role_show},on:{role_show:e.role_flag,"update:show":function(t){e.role_show=t}}}):e._e()]:e._e()],2)},a=[],r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{attrs:{title:"添加管理员",visible:e.visible,center:"",width:"40%"},on:{"update:visible":function(t){e.visible=t}}},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[i("el-form-item",{attrs:{label:"账号",prop:"name","label-width":e.formLabelWidth}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"密码",prop:"password","label-width":e.formLabelWidth}},[i("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){return e.show_flag(!1)}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.show_flag(!0)}}},[e._v("确 定")])],1)],1)],1)},s=[],n=(i("7f7f"),i("5c96"),{data:function(){return{visible:this.show,formLabelWidth:"120px",form:{name:"",password:""},rules:{name:[{required:!0,message:"请输入账号",trigger:"blur"},{max:20,message:"账号不得超过20个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20个字符",trigger:"blur"}]}}},props:{show:{type:Boolean,default:!1}},methods:{show_flag:function(e){var t=this;e?this.$refs["form"].validate((function(i){i&&t.add_user(e)})):this.$emit("add_show",e)},add_user:function(e){var t=this,i=this,o=this.form.name,a=this.form.password;this.req({url:"Admin/add",data:{username:o,password:a},method:"POST"}).then((function(o){200==o.code?(i.$message("添加成功~"),setTimeout((function(){t.form.name="",t.form.password="",t.$emit("add_show",e)}),1e3)):i.$message("添加失败~")}))}},watch:{show:function(){this.visible=this.show},visible:function(){this.visible||this.$emit("add_show",!1)}}}),l=n,c=i("2877"),d=Object(c["a"])(l,r,s,!1,null,null,null),u=d.exports,f=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{attrs:{title:"添加管理员",visible:e.visible,center:"",width:"40%"},on:{"update:visible":function(t){e.visible=t}}},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[i("el-form-item",{attrs:{label:"账号",prop:"username","label-width":e.formLabelWidth}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"密码",prop:"password","label-width":e.formLabelWidth}},[i("el-input",{attrs:{placeholder:"留空不修改密码",type:"password",autocomplete:"off"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"描述",prop:"describes","label-width":e.formLabelWidth}},[i("el-input",{attrs:{type:"textarea",autocomplete:"off"},model:{value:e.form.describes,callback:function(t){e.$set(e.form,"describes",t)},expression:"form.describes"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){return e.show_flag(!1)}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.show_flag(!0)}}},[e._v("确 定")])],1)],1)],1)},h=[],m=(i("c5f6"),{data:function(){return{visible:this.show,formLabelWidth:"120px",form:{username:"",password:"",describes:""},rules:{username:[{required:!0,message:"请输入账号",trigger:"blur"},{max:20,message:"账号不得超过20个字符",trigger:"blur"}],password:[{min:6,max:20,message:"长度在 6 到 20个字符",trigger:"blur"}]}}},props:{show:{type:Boolean,default:!1},edit_id:{type:Number}},created:function(){this.edit_data(this.edit_id)},methods:{show_flag:function(e){var t=this;e?this.$refs["form"].validate((function(i){i&&t.edit_user(e)})):this.$emit("edit_show",e)},edit_data:function(e){var t=this;this.req({url:"Admin/admin_list?id="+e,data:{},method:"GET"}).then((function(e){200==e.code&&(t.form=e.data)}))},edit_user:function(e){var t=this,i=this,o=this.form.username,a=this.form.password,r=this.form.describes;this.req({url:"Admin/edit",data:{username:o,password:a,describes:r,id:this.edit_id},method:"POST"}).then((function(o){200==o.code?(i.$message("编辑成功~"),setTimeout((function(){t.form.name="",t.form.password="",t.$emit("edit_show",e)}),1e3)):i.$message("编辑失败~")}))}},watch:{show:function(){this.visible=this.show},visible:function(){this.visible||this.$emit("edit_show",!1)}}}),p=m,_=Object(c["a"])(p,f,h,!1,null,null,null),b=_.exports,g=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{attrs:{title:"设置角色权限",visible:e.visible,center:"",width:"40%"},on:{"update:visible":function(t){e.visible=t}}},[i("el-checkbox-group",{attrs:{size:"small"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},e._l(e.role_data,(function(t){return i("el-checkbox",{key:t.id,attrs:{label:t.id,border:""}},[e._v(e._s(t.role_name))])})),1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){return e.show_flag(!1)}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.show_flag(!0)}}},[e._v("确 定")])],1)],1)],1)},v=[],w={data:function(){return{visible:this.show,formLabelWidth:"120px",role_data:[],checked:[]}},created:function(){this.role_con(this.admin_id)},props:{show:{type:Boolean,default:!1},admin_id:{type:Number}},methods:{show_flag:function(e){var t=this;e?t.role_admin(e):this.$emit("role_show",e)},role_con:function(e){var t=this;this.req({url:"Admin/admin_role?admin_id="+e,data:{},method:"POST"}).then((function(e){200==e.code&&(t.role_data=e.data.data,t.checked=e.data.checked,console.log(e.data))}))},role_admin:function(e){var t=this,i=this,o=this.checked;this.req({url:"Admin/setrole",data:{admin_id:this.admin_id,admin_ids:o,checked:this.checked},method:"POST"}).then((function(o){200==o.code?(i.$message("设置成功~"),setTimeout((function(){t.$emit("role_show",e)}),1e3)):i.$message("设置失败~")}))}},watch:{show:function(){this.visible=this.show},visible:function(){this.visible||this.$emit("role_show",!1)}}},y=w,k=(i("bea0"),Object(c["a"])(y,g,v,!1,null,"260a819f",null)),x=k.exports,S={components:{addDialog:u,editDialog:b,roleDialog:x},data:function(){return{pageSize:10,pageSizes:[10,20,50,100],total:0,page:1,srcList:[],tableData:[],headers:{token:localStorage.getItem("token")},Selectval:[],add_show:!1,edit_show:!1,role_show:!1,admin_id:0,edit_id:0}},created:function(){this.getTemplateList()},methods:{handleSelectionChange:function(e){this.Selectval=e},handleSizeChange:function(e){this.getTemplateList(this.page,e)},add_admin:function(){this.add_show=!0},show_flag:function(e){this.add_show=!1,e&&this.getTemplateList()},editadmin:function(e){this.edit_id=e,this.edit_show=!0},roleadmin:function(e){this.admin_id=e,this.role_show=!0},role_flag:function(e){this.role_show=!1,e&&this.getTemplateList()},edit_flag:function(e){this.edit_show=!1,e&&this.getTemplateList()},getTemplateList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.page,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.pageSize,i=this,o={page:e,limit:t};this.req({url:"Admin/admin_list",data:o,method:"POST"}).then((function(e){i.total=e.data.total;var t=e.data.data;i.tableData=t}))},deleteadmin:function(e){var t=this;if(0!=this.Selectval||"all"!=e){if("all"==e){for(var i=[],o=0;o<this.Selectval.length;o++)i.push(this.Selectval[o]["id"]);console.log(this.Selectval),e=i.join(",")}this.$confirm("此操作将删除管理员, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.req({url:"admin/delete?id="+e,data:{},method:"GET"}).then((function(e){t.getTemplateList(),t.$message("删除成功~")}))}))}else t.$message("请先选择删除项~")},pageChange:function(e){this.page=e,this.getTemplateList(e)}}},$=S,T=(i("15e8"),Object(c["a"])($,o,a,!1,null,"116915d7",null));t["default"]=T.exports},bea0:function(e,t,i){"use strict";i("ff9e")},c486:function(e,t,i){},c5f6:function(e,t,i){"use strict";var o=i("7726"),a=i("69a8"),r=i("2d95"),s=i("5dbc"),n=i("6a99"),l=i("79e5"),c=i("9093").f,d=i("11e9").f,u=i("86cc").f,f=i("aa77").trim,h="Number",m=o[h],p=m,_=m.prototype,b=r(i("2aeb")(_))==h,g="trim"in String.prototype,v=function(e){var t=n(e,!1);if("string"==typeof t&&t.length>2){t=g?t.trim():f(t,3);var i,o,a,r=t.charCodeAt(0);if(43===r||45===r){if(i=t.charCodeAt(2),88===i||120===i)return NaN}else if(48===r){switch(t.charCodeAt(1)){case 66:case 98:o=2,a=49;break;case 79:case 111:o=8,a=55;break;default:return+t}for(var s,l=t.slice(2),c=0,d=l.length;c<d;c++)if(s=l.charCodeAt(c),s<48||s>a)return NaN;return parseInt(l,o)}}return+t};if(!m(" 0o1")||!m("0b1")||m("+0x1")){m=function(e){var t=arguments.length<1?0:e,i=this;return i instanceof m&&(b?l((function(){_.valueOf.call(i)})):r(i)!=h)?s(new p(v(t)),i,m):v(t)};for(var w,y=i("9e1e")?c(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;y.length>k;k++)a(p,w=y[k])&&!a(m,w)&&u(m,w,d(p,w));m.prototype=_,_.constructor=m,i("2aba")(o,h,m)}},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},ff9e:function(e,t,i){}}]);