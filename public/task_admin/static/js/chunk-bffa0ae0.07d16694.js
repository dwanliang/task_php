(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bffa0ae0"],{"11e9":function(e,t,o){var i=o("52a7"),r=o("4630"),s=o("6821"),l=o("6a99"),a=o("69a8"),n=o("c69a"),c=Object.getOwnPropertyDescriptor;t.f=o("9e1e")?c:function(e,t){if(e=s(e),t=l(t,!0),n)try{return c(e,t)}catch(o){}if(a(e,t))return r(!i.f.call(e,t),e[t])}},2827:function(e,t,o){},"3d9e":function(e,t,o){"use strict";o("2827")},"5dbc":function(e,t,o){var i=o("d3f4"),r=o("8b97").set;e.exports=function(e,t,o){var s,l=t.constructor;return l!==o&&"function"==typeof l&&(s=l.prototype)!==o.prototype&&i(s)&&r&&r(e,s),e}},8051:function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"root"},[o("div",{staticClass:"role-fun"},[o("el-button",{attrs:{icon:"el-icon-circle-plus-outline",type:"primary"},on:{click:e.add_role}},[e._v("添加角色")]),e._v(" "),o("el-button",{attrs:{icon:"el-icon-delete",type:"danger"},on:{click:function(t){return e.deleterole("all")}}},[e._v("批量删除")])],1),e._v(" "),o("el-card",{staticClass:"box-card"},[o("h3",[e._v("角色列表")]),e._v(" "),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"default-sort":{prop:"createDate",order:"descending"},"row-key":"id",border:"","default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":e.handleSelectionChange}},[o("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),o("el-table-column",{attrs:{prop:"id",label:"ID",width:"100","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{prop:"role_name",label:"角色名称","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{prop:"role_describe",label:"描述","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{prop:"role_sort",label:"排序",sortable:"","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{prop:"add_time",label:"创建时间",sortable:""}}),e._v(" "),o("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return o("div",{staticClass:"operation"},[o("el-button",{attrs:{size:"mini",icon:"el-icon-s-operation",type:"success"},on:{click:function(o){return e.permissionsrole(t.row.id)}}},[e._v("权限")]),e._v(" "),o("el-button",{attrs:{size:"mini",icon:"el-icon-edit",type:"primary"},on:{click:function(o){return e.editrole(t.row.id)}}},[e._v("编辑")]),e._v(" "),o("el-button",{attrs:{size:"mini",icon:"el-icon-delete",type:"danger"},on:{click:function(o){return e.deleterole(t.row.id)}}},[e._v("删除")])],1)}}])})],1),e._v(" "),o("el-pagination",{staticClass:"pagination",attrs:{background:"",layout:"total, sizes,prev, pager, next,jumper",align:"left",total:e.total,"page-size":e.pageSize,"page-sizes":e.pageSizes},on:{"size-change":e.handleSizeChange,"current-change":e.pageChange,"prev-click":e.pageChange,"next-click":e.pageChange}})],1),e._v(" "),o("add-Dialog",{attrs:{show:e.add_show},on:{add_show:e.show_flag,"update:show":function(t){e.add_show=t}}}),e._v(" "),e.edit_show?[e.edit_show?o("edit-Dialog",{attrs:{edit_id:e.edit_id,show:e.edit_show},on:{edit_show:e.edit_flag,"update:show":function(t){e.edit_show=t}}}):e._e()]:e._e(),e._v(" "),e.permissions_show?[e.permissions_show?o("permissions-Dialog",{attrs:{role_id:e.role_id,show:e.permissions_show},on:{permissions_show:e.permissions_flag,"update:show":function(t){e.permissions_show=t}}}):e._e()]:e._e()],2)},r=[],s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-dialog",{attrs:{title:"添加角色",visible:e.visible,center:"",width:"40%"},on:{"update:visible":function(t){e.visible=t}}},[o("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[o("el-form-item",{attrs:{label:"名称",prop:"role_name","label-width":e.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.role_name,callback:function(t){e.$set(e.form,"role_name",t)},expression:"form.role_name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"描述",prop:"role_describe","label-width":e.formLabelWidth}},[o("el-input",{attrs:{type:"textarea",autocomplete:"off"},model:{value:e.form.role_describe,callback:function(t){e.$set(e.form,"role_describe",t)},expression:"form.role_describe"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"排序",prop:"role_sort","label-width":e.formLabelWidth}},[o("el-input",{attrs:{type:"number",autocomplete:"off"},model:{value:e.form.role_sort,callback:function(t){e.$set(e.form,"role_sort",t)},expression:"form.role_sort"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){return e.show_flag(!1)}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.show_flag(!0)}}},[e._v("确 定")])],1)],1)],1)},l=[],a=(o("5c96"),{data:function(){return{visible:this.show,formLabelWidth:"120px",form:{role_name:"",role_describe:"",role_sort:""},Parent_data:[],rules:{role_name:[{required:!0,message:"请输入名称",trigger:"blur"},{max:20,message:"账号不得超过20个字符",trigger:"blur"}],role_describe:[{required:!0,message:"请输入描述",trigger:"blur"}],role_sort:[{required:!0,message:"请输入排序",trigger:"blur"}]}}},created:function(){},props:{show:{type:Boolean,default:!1}},methods:{show_flag:function(e){var t=this;e?this.$refs["form"].validate((function(o){o&&t.add_role(e)})):this.$emit("add_show",e)},add_role:function(e){var t=this,o=this;this.req({url:"Role/add",data:this.form,method:"POST"}).then((function(i){200==i.code?(o.$message("添加成功~"),setTimeout((function(){t.form={role_name:"",role_describe:"",role_sort:""},t.$emit("add_show",e)}),1e3)):o.$message("添加失败~")}))}},watch:{show:function(){this.visible=this.show},visible:function(){this.visible||this.$emit("add_show",!1)}}}),n=a,c=o("2877"),d=Object(c["a"])(n,s,l,!1,null,null,null),u=d.exports,f=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-dialog",{attrs:{title:"编辑角色",visible:e.visible,center:"",width:"40%"},on:{"update:visible":function(t){e.visible=t}}},[o("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[o("el-form-item",{attrs:{label:"名称",prop:"role_name","label-width":e.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.role_name,callback:function(t){e.$set(e.form,"role_name",t)},expression:"form.role_name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"描述",prop:"role_describe","label-width":e.formLabelWidth}},[o("el-input",{attrs:{type:"textarea",autocomplete:"off"},model:{value:e.form.role_describe,callback:function(t){e.$set(e.form,"role_describe",t)},expression:"form.role_describe"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"排序",prop:"role_sort","label-width":e.formLabelWidth}},[o("el-input",{attrs:{type:"number",autocomplete:"off"},model:{value:e.form.role_sort,callback:function(t){e.$set(e.form,"role_sort",t)},expression:"form.role_sort"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){return e.show_flag(!1)}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.show_flag(!0)}}},[e._v("确 定")])],1)],1)],1)},h=[],p=(o("c5f6"),{data:function(){return{visible:this.show,formLabelWidth:"120px",form:{role_name:"",role_describe:"",role_sort:""},Parent_data:[],rules:{role_name:[{required:!0,message:"请输入名称",trigger:"blur"},{max:20,message:"账号不得超过20个字符",trigger:"blur"}],role_describe:[{required:!0,message:"请输入描述",trigger:"blur"}],role_sort:[{required:!0,message:"请输入排序",trigger:"blur"}]}}},created:function(){this.role_con(this.edit_id)},props:{show:{type:Boolean,default:!1},edit_id:{type:Number}},methods:{show_flag:function(e){var t=this;e?this.$refs["form"].validate((function(o){o&&t.edit_role(e)})):this.$emit("edit_show",e)},role_con:function(e){var t=this;this.req({url:"Role/role_list?id="+e,data:{},method:"POST"}).then((function(e){200==e.code&&(t.form=e.data)}))},edit_role:function(e){var t=this,o=this;this.req({url:"Role/edit",data:this.form,method:"POST"}).then((function(i){200==i.code?(o.$message("编辑成功~"),setTimeout((function(){t.$emit("edit_show",e)}),1e3)):o.$message("编辑失败~")}))}},watch:{show:function(){this.visible=this.show},visible:function(){this.visible||this.$emit("edit_show",!1)}}}),_=p,m=Object(c["a"])(_,f,h,!1,null,null,null),b=m.exports,g=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-dialog",{attrs:{title:"设置角色权限",visible:e.visible,center:"",width:"40%"},on:{"update:visible":function(t){e.visible=t}}},[o("el-tree",{ref:"tree",attrs:{data:e.permissions_data,"show-checkbox":"","node-key":"id","default-expanded-keys":e.checked,"default-checked-keys":e.checked,props:e.defaultProps}}),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){return e.show_flag(!1)}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.show_flag(!0)}}},[e._v("确 定")])],1)],1)],1)},v=[],w={data:function(){return{visible:this.show,formLabelWidth:"120px",permissions_data:[],checked:[],defaultProps:{children:"children",label:"permissions_name"}}},created:function(){this.permissions_con(this.role_id)},props:{show:{type:Boolean,default:!1},role_id:{type:Number}},methods:{show_flag:function(e){var t=this;e?t.permissions_role(e):this.$emit("permissions_show",e)},permissions_con:function(e){var t=this;this.req({url:"Role/role_permissions?role_id="+e,data:{},method:"POST"}).then((function(e){200==e.code&&(t.permissions_data=e.data.data,t.checked=e.data.checke)}))},permissions_role:function(e){var t=this,o=this,i=this.$refs.tree.getCheckedKeys();this.req({url:"Role/setpermissions",data:{role_id:this.role_id,permissions_ids:i,checked:this.checked},method:"POST"}).then((function(i){200==i.code?(o.$message("设置成功~"),setTimeout((function(){t.$emit("permissions_show",e)}),1e3)):o.$message("设置失败~")}))}},watch:{show:function(){this.visible=this.show},visible:function(){this.visible||this.$emit("permissions_show",!1)}}},y=w,k=Object(c["a"])(y,g,v,!1,null,null,null),x=k.exports,S={components:{addDialog:u,editDialog:b,permissionsDialog:x},data:function(){return{pageSize:10,pageSizes:[10,20,50,100],total:0,page:1,srcList:[],tableData:[],headers:{token:localStorage.getItem("token")},Selectval:[],add_show:!1,edit_show:!1,permissions_show:!1,role_id:0,edit_id:0}},created:function(){this.getTemplateList()},methods:{handleSelectionChange:function(e){this.Selectval=e},handleSizeChange:function(e){this.getTemplateList(this.page,e)},add_role:function(){this.add_show=!0},show_flag:function(e){this.add_show=!1,e&&this.getTemplateList()},editrole:function(e){this.edit_id=e,this.edit_show=!0},permissionsrole:function(e){this.role_id=e,this.permissions_show=!0},permissions_flag:function(e){this.permissions_show=!1,e&&this.getTemplateList()},edit_flag:function(e){this.edit_show=!1,e&&this.getTemplateList()},getTemplateList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.page,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.pageSize,o=this,i={page:e,limit:t};this.req({url:"Role/role_list",data:i,method:"POST"}).then((function(e){console.log(e.data),o.total=e.data.total;var t=e.data.data;o.tableData=t}))},deleterole:function(e){var t=this;if(0!=this.Selectval||"all"!=e){if("all"==e){for(var o=[],i=0;i<this.Selectval.length;i++)o.push(this.Selectval[i]["id"]);console.log(this.Selectval),e=o.join(",")}this.$confirm("此操作将删除角色, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.req({url:"Role/delete?id="+e,data:{},method:"GET"}).then((function(e){t.getTemplateList(),t.$message("删除成功~")}))}))}else t.$message("请先选择删除项~")},pageChange:function(e){this.page=e,this.getTemplateList(e)}}},$=S,T=(o("3d9e"),Object(c["a"])($,i,r,!1,null,"e16d4c08",null));t["default"]=T.exports},"8b97":function(e,t,o){var i=o("d3f4"),r=o("cb7c"),s=function(e,t){if(r(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,i){try{i=o("9b43")(Function.call,o("11e9").f(Object.prototype,"__proto__").set,2),i(e,[]),t=!(e instanceof Array)}catch(r){t=!0}return function(e,o){return s(e,o),t?e.__proto__=o:i(e,o),e}}({},!1):void 0),check:s}},9093:function(e,t,o){var i=o("ce10"),r=o("e11e").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},aa77:function(e,t,o){var i=o("5ca1"),r=o("be13"),s=o("79e5"),l=o("fdef"),a="["+l+"]",n="​",c=RegExp("^"+a+a+"*"),d=RegExp(a+a+"*$"),u=function(e,t,o){var r={},a=s((function(){return!!l[e]()||n[e]()!=n})),c=r[e]=a?t(f):l[e];o&&(r[o]=c),i(i.P+i.F*a,"String",r)},f=u.trim=function(e,t){return e=String(r(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(d,"")),e};e.exports=u},c5f6:function(e,t,o){"use strict";var i=o("7726"),r=o("69a8"),s=o("2d95"),l=o("5dbc"),a=o("6a99"),n=o("79e5"),c=o("9093").f,d=o("11e9").f,u=o("86cc").f,f=o("aa77").trim,h="Number",p=i[h],_=p,m=p.prototype,b=s(o("2aeb")(m))==h,g="trim"in String.prototype,v=function(e){var t=a(e,!1);if("string"==typeof t&&t.length>2){t=g?t.trim():f(t,3);var o,i,r,s=t.charCodeAt(0);if(43===s||45===s){if(o=t.charCodeAt(2),88===o||120===o)return NaN}else if(48===s){switch(t.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+t}for(var l,n=t.slice(2),c=0,d=n.length;c<d;c++)if(l=n.charCodeAt(c),l<48||l>r)return NaN;return parseInt(n,i)}}return+t};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(e){var t=arguments.length<1?0:e,o=this;return o instanceof p&&(b?n((function(){m.valueOf.call(o)})):s(o)!=h)?l(new _(v(t)),o,p):v(t)};for(var w,y=o("9e1e")?c(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;y.length>k;k++)r(_,w=y[k])&&!r(p,w)&&u(p,w,d(_,w));p.prototype=m,m.constructor=p,o("2aba")(i,h,p)}},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);