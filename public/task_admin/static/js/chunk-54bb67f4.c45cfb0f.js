(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54bb67f4"],{"11e9":function(e,t,a){var i=a("52a7"),o=a("4630"),r=a("6821"),s=a("6a99"),l=a("69a8"),n=a("c69a"),c=Object.getOwnPropertyDescriptor;t.f=a("9e1e")?c:function(e,t){if(e=r(e),t=s(t,!0),n)try{return c(e,t)}catch(a){}if(l(e,t))return o(!i.f.call(e,t),e[t])}},"5dbc":function(e,t,a){var i=a("d3f4"),o=a("8b97").set;e.exports=function(e,t,a){var r,s=t.constructor;return s!==a&&"function"==typeof s&&(r=s.prototype)!==a.prototype&&i(r)&&o&&o(e,r),e}},"8b97":function(e,t,a){var i=a("d3f4"),o=a("cb7c"),r=function(e,t){if(o(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,i){try{i=a("9b43")(Function.call,a("11e9").f(Object.prototype,"__proto__").set,2),i(e,[]),t=!(e instanceof Array)}catch(o){t=!0}return function(e,a){return r(e,a),t?e.__proto__=a:i(e,a),e}}({},!1):void 0),check:r}},9093:function(e,t,a){var i=a("ce10"),o=a("e11e").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,o)}},"95a4":function(e,t,a){"use strict";a("b634")},aa77:function(e,t,a){var i=a("5ca1"),o=a("be13"),r=a("79e5"),s=a("fdef"),l="["+s+"]",n="​",c=RegExp("^"+l+l+"*"),u=RegExp(l+l+"*$"),d=function(e,t,a){var o={},l=r((function(){return!!s[e]()||n[e]()!=n})),c=o[e]=l?t(f):s[e];a&&(o[a]=c),i(i.P+i.F*l,"String",o)},f=d.trim=function(e,t){return e=String(o(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(u,"")),e};e.exports=d},b12fa:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"root"},[a("div",{staticClass:"search"},[a("el-card",{staticClass:"box-card"},[a("h3",[e._v("搜索")]),e._v(" "),a("el-select",{attrs:{placeholder:"账号状态",clearable:""},model:{value:e.dongjie_value,callback:function(t){e.dongjie_value=t},expression:"dongjie_value"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e._v(" "),a("el-select",{attrs:{placeholder:"用户来源",clearable:""},model:{value:e.source_value,callback:function(t){e.source_value=t},expression:"source_value"}},e._l(e.options1,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e._v(" "),a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入用户名称",clearable:""},model:{value:e.search_val,callback:function(t){e.search_val=t},expression:"search_val"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.goSearch}},[e._v("搜索")])],1)],1),e._v(" "),a("div",{staticClass:"user-fun"},[a("el-button",{attrs:{icon:"el-icon-circle-plus-outline",type:"primary"},on:{click:e.add_user}},[e._v("添加用户")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-delete",type:"danger"},on:{click:function(t){return e.deleteUser("all")}}},[e._v("批量删除")])],1),e._v(" "),a("el-card",{staticClass:"box-card"},[a("h3",[e._v("用户列表")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"default-sort":{prop:"createDate",order:"descending"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"100","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{align:"left",width:"200",prop:"user_head",label:"头像"},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{staticClass:"my-pic"},[a("el-image",{staticStyle:{width:"80px",height:"80px"},attrs:{fit:"scale-down",src:t.row.user_head,"preview-src-list":e.srcList},on:{click:function(a){return e.imgClick(t.row.user_head)}}})],1)}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"user_name",width:"300",label:"账号","show-overflow-tooltip":""}}),e._v("、\n      "),a("el-table-column",{attrs:{prop:"email",label:"邮箱","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"注册时间",prop:"add_time",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"source",width:"100",label:"来源","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"冻结状态"},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{},[t.row.dongjie?a("div",[a("el-button",{attrs:{type:"warning",round:""}},[e._v("冻结")])],1):a("div",[a("el-button",{attrs:{type:"primary",round:""}},[e._v("正常")])],1)])}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"280",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{staticClass:"operation"},[t.row.dongjie?[a("el-button",{attrs:{size:"mini",icon:"el-icon-unlock",type:"primary"},on:{click:function(a){return e.dongjieUser(t.row.id,t.row.dongjie)}}},[e._v("解冻")])]:[a("el-button",{attrs:{size:"mini",icon:"el-icon-lock",type:"warning"},on:{click:function(a){return e.dongjieUser(t.row.id)}}},[e._v("冻结")])],e._v(" "),a("el-button",{attrs:{size:"mini",icon:"el-icon-edit",type:"primary"},on:{click:function(a){return e.editUser(t.row.id)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",icon:"el-icon-delete",type:"danger"},on:{click:function(a){return e.deleteUser(t.row.id)}}},[e._v("删除")])],2)}}])})],1),e._v(" "),a("el-pagination",{staticClass:"pagination",attrs:{background:"",layout:"total, sizes,prev, pager, next,jumper",align:"left",total:e.total,"page-size":e.pageSize,"page-sizes":e.pageSizes},on:{"size-change":e.handleSizeChange,"current-change":e.pageChange,"prev-click":e.pageChange,"next-click":e.pageChange}})],1),e._v(" "),a("add-Dialog",{attrs:{show:e.add_show},on:{add_show:e.show_flag,"update:show":function(t){e.add_show=t}}}),e._v(" "),e.edit_show?[e.edit_show?a("edit-Dialog",{attrs:{edit_id:e.edit_id,show:e.edit_show},on:{edit_show:e.edit_flag,"update:show":function(t){e.edit_show=t}}}):e._e()]:e._e()],2)},o=[],r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:"添加用户",visible:e.visible,center:"",width:"40%"},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"账号",prop:"name","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password","label-width":e.formLabelWidth}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.show_flag(!1)}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.show_flag(!0)}}},[e._v("确 定")])],1)],1)],1)},s=[],l=(a("7f7f"),a("5c96"),{data:function(){return{visible:this.show,formLabelWidth:"120px",form:{name:"",password:""},rules:{name:[{required:!0,message:"请输入账号",trigger:"blur"},{max:20,message:"账号不得超过20个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20个字符",trigger:"blur"}]}}},props:{show:{type:Boolean,default:!1}},methods:{show_flag:function(e){var t=this;e?this.$refs["form"].validate((function(a){a&&t.add_user(e)})):this.$emit("add_show",e)},add_user:function(e){var t=this,a=this,i=this.form.name,o=this.form.password;this.req({url:"User/add",data:{username:i,password:o},method:"POST"}).then((function(i){200==i.code?(a.$message("添加成功~"),setTimeout((function(){t.form.name="",t.form.password="",t.$emit("add_show",e)}),1e3)):a.$message("添加失败~")}))}},watch:{show:function(){this.visible=this.show},visible:function(){this.visible||this.$emit("add_show",!1)}}}),n=l,c=a("2877"),u=Object(c["a"])(n,r,s,!1,null,null,null),d=u.exports,f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:"编辑用户",visible:e.visible,center:"",width:"50%"},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"账号",prop:"user_name","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.user_name,callback:function(t){e.$set(e.form,"user_name",t)},expression:"form.user_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password","label-width":e.formLabelWidth}},[a("el-input",{attrs:{type:"password",placeholder:"留空不修改密码",autocomplete:"off"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱",prop:"email","label-width":e.formLabelWidth}},[a("el-input",{attrs:{type:"email",autocomplete:"off"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"头像",prop:"user_head","label-width":e.formLabelWidth}},[a("el-upload",{ref:"uploadxls",attrs:{action:"http://localhost:8080/test/home/addHome","auto-upload":!1,data:e.form,"before-upload":e.beforeupload,"on-change":e.handleChange,"list-type":"picture-card","file-list":e.form.user_head,accept:"image/png,image/gif,image/jpg,image/jpeg"}},[a("i",{staticClass:"el-icon-plus"})])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.show_flag(!1)}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.show_flag(!0)}}},[e._v("确 定")])],1)],1)],1)},h=[],p=(a("c5f6"),{data:function(){return{visible:this.show,formLabelWidth:"120px",form:{user_name:"",password:"",email:"",user_head:[]},fileList:[],formData:new FormData,rules:{user_name:[{required:!0,message:"请输入账号",trigger:"blur"},{max:20,message:"账号不得超过20个字符",trigger:"blur"}],password:[{trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20个字符",trigger:"blur"}],email:[{trigger:"blur"}]}}},props:{show:{type:Boolean,default:!1},edit_id:{type:Number}},created:function(){this.edit_data(this.edit_id)},methods:{beforeupload:function(e){return this.formData.append("file",e),!1},handleChange:function(e,t){t.length>1&&t.splice(0,1)},edit_data:function(e){var t=this;this.req({url:"User/user_list?id="+e,data:{},method:"POST"}).then((function(e){200==e.code&&(t.form=e.data)}))},show_flag:function(e){var t=this;e?this.$refs["form"].validate((function(a){a&&t.edit_user(e)})):this.$emit("edit_show",e)},edit_user:function(e){var t=this,a=this,i=this.form.user_name,o=this.form.password,r=this.form.email;this.$refs.uploadxls.submit(),this.formData.append("username",i),o&&this.formData.append("password",o),this.formData.append("email",r),this.formData.append("id",this.edit_id),this.req({url:"User/edit",data:this.formData,method:"POST"}).then((function(i){200==i.code?(a.$message("修改成功~"),setTimeout((function(){t.form.name="",t.form.password="",t.$emit("edit_show",e)}),1e3)):a.$message("修改失败~")}))}},watch:{show:function(){this.visible=this.show},visible:function(){this.visible||this.$emit("edit_show",!1)}}}),m=p,v=Object(c["a"])(m,f,h,!1,null,null,null),_=v.exports,g={components:{addDialog:d,editDialog:_},data:function(){return{pageSize:10,pageSizes:[10,20,50,100],total:0,page:1,srcList:[],tableData:[],headers:{token:localStorage.getItem("token")},Selectval:[],add_show:!1,edit_show:!1,edit_id:0,options:[{value:0,label:"正常"},{value:1,label:"冻结"}],options1:[{value:"微信小程序",label:"微信小程序"},{value:"H5",label:"H5"},{value:"APP",label:"APP"}],dongjie_value:null,source_value:"",search_val:"",value2:""}},created:function(){this.getTemplateList()},methods:{imgClick:function(e){this.srcList=[e]},handleSelectionChange:function(e){this.Selectval=e},handleSizeChange:function(e){this.getTemplateList(this.page,e)},add_user:function(){this.add_show=!0},show_flag:function(e){this.add_show=!1,e&&this.getTemplateList()},editUser:function(e){this.edit_id=e,this.edit_show=!0},edit_flag:function(e){this.edit_show=!1,e&&this.getTemplateList()},getTemplateList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.page,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.pageSize,a=this,i={page:e,limit:t};null!==this.dongjie_value&&Object.assign(i,{dongjie:this.dongjie_value}),""!==this.search_val&&Object.assign(i,{user_name:this.search_val}),""!==this.source_value&&Object.assign(i,{source:this.source_value}),this.req({url:"User/user_list",data:i,method:"POST"}).then((function(e){a.total=e.data.total;var t=e.data.data;a.tableData=t}))},goSearch:function(){this.page=1;var e=this;this.search_val;""!==e.search_val&&e.dongjie_value.length<1&&""!==e.source_value||this.getTemplateList()},dongjieUser:function(e,t){var a=this,i="",o="";t?(i="此操作将解冻用户, 是否继续?",o="解冻成功~"):(i="此操作将冻结用户, 是否继续?",o="冻结成功~"),this.$confirm(i,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.req({url:"User/dongjie?id="+e+"&state="+t,data:{},method:"GET"}).then((function(e){a.getTemplateList(),a.$message(o)}))}))},deleteUser:function(e){var t=this;if(0!=this.Selectval||"all"!=e){if("all"==e){for(var a=[],i=0;i<this.Selectval.length;i++)a.push(this.Selectval[i]["id"]);console.log(this.Selectval),e=a.join(",")}this.$confirm("此操作将删除用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.req({url:"User/delete?id="+e,data:{},method:"GET"}).then((function(e){t.getTemplateList(),t.$message("删除成功~")}))}))}else t.$message("请先选择删除项~")},downloadTemplate:function(e){},pageChange:function(e){this.page=e,this.getTemplateList(e)}}},b=g,w=(a("95a4"),Object(c["a"])(b,i,o,!1,null,"1ecc077c",null));t["default"]=w.exports},b634:function(e,t,a){},c5f6:function(e,t,a){"use strict";var i=a("7726"),o=a("69a8"),r=a("2d95"),s=a("5dbc"),l=a("6a99"),n=a("79e5"),c=a("9093").f,u=a("11e9").f,d=a("86cc").f,f=a("aa77").trim,h="Number",p=i[h],m=p,v=p.prototype,_=r(a("2aeb")(v))==h,g="trim"in String.prototype,b=function(e){var t=l(e,!1);if("string"==typeof t&&t.length>2){t=g?t.trim():f(t,3);var a,i,o,r=t.charCodeAt(0);if(43===r||45===r){if(a=t.charCodeAt(2),88===a||120===a)return NaN}else if(48===r){switch(t.charCodeAt(1)){case 66:case 98:i=2,o=49;break;case 79:case 111:i=8,o=55;break;default:return+t}for(var s,n=t.slice(2),c=0,u=n.length;c<u;c++)if(s=n.charCodeAt(c),s<48||s>o)return NaN;return parseInt(n,i)}}return+t};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof p&&(_?n((function(){v.valueOf.call(a)})):r(a)!=h)?s(new m(b(t)),a,p):b(t)};for(var w,y=a("9e1e")?c(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;y.length>k;k++)o(m,w=y[k])&&!o(p,w)&&d(p,w,u(m,w));p.prototype=v,v.constructor=p,a("2aba")(i,h,p)}},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);